<!-- あつまれどうぶつの森マイデザイン掲示板 -->
<div class="design">
  <!-- エラーメッセージ表示 -->
  <% if @design.errors.any? %>
    <p><%= pluralize(@design.errors.count,"error", "") %>個の入力エラーが発生しました</p>
      <ul>
      	<% @design.errors.full_messages.each do |msg| %>
      	  <li><%= msg %></li>
    	  <% end %>
      </ul>
  <% end %>
  <!-- 検索フォーム -->
  <section class="design-contents">
  <%= search_form_for @search do |f| %>
    <!-- titleフィールドに次が含まれている場合に検索 -->
    <%= f.label :title_cont, "デザイン名" %>
    <%= f.search_field :title_cont %>
    <!-- nameフィールドに次が含まれている場合に検索 -->
    <%= f.label :name_cont, "投稿者名" %>
    <%= f.search_field :name_cont %>
    <!-- categoryフィールドに次が含まれている場合に検索 -->
    <%= f.label :category_cont, "カテゴリー" %>
    <%= f.search_field :category_cont %>
    <%= f.submit '検索' %>
  <% end %>
  </section>
  <!-- 検索結果 -->
    <section class="design-contents">
    <table>
      <thead>
        <tr>
          <th><%# sort_link(@search, :title) %></th>
        </tr>
      </thead>
      <tbody>
        <% @searches.each do |search| %>
        <tr>
          <td><%= search.title %></td>
          <td><%= search.name %></td>
          <td><%= search.category_i18n %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </section>
  <!-- 投稿フォーム -->
  <section class="design-contents">
    <div class="design-contents-form">
  	  <%= form_for(@design) do |f| %>
    	  <table class="design-contents-form-table">
    	  	<tbody class="design-contents-form-tbody">
    	  	  <!-- デザイン名 -->
    	  	  <tr class="design-contents-form-tr">
    	  	  	<td class="design-contents-form-td"><%= f.label :title, "デザイン名" %></td>
    	  	    <td class="design-contents-form-td"><%= f.text_field :title, :placeholder => "14文字以内" %></td>
     	  	  	<td class="design-contents-form-td"></td>
    	  	  </tr>
    	  	  <!-- 島名 -->
    	  	  <tr class="design-contents-form-tr">
    	  	  	<td class="design-contents-form-td"><%= f.label :name, "投稿者名" %></td>
    	  	    <td class="design-contents-form-td"><%= f.text_field :name, :placeholder => "10文字以内" %></td>
     	  	  	<td class="design-contents-form-td"></td>
    	  	  </tr>
    	  	  <!-- ID画像 -->
    	      <tr class="design-contents-form-tr">
    	      	<td class="design-contents-form-td"><%= f.label :id_image %></td>
    	        <td class="design-contents-form-td"><%= f.attachment_field :id_image %></td>
     	  	  	<td class="design-contents-form-td"></td>
    	      </tr>
    	      <!-- サンプル画像 -->
    	      <tr class="design-contents-form-tr">
    	      	<td class="design-contents-form-td"><%= f.label :sample_image %><span class="design-contents-form-td-span">※任意</span></td>
    	        <td class="design-contents-form-td"><%= f.attachment_field :sample_image %></td>
    	      </tr>
    	      <!-- カテゴリー -->
    	      <tr class="design-contents-form-tr">
    	        <td class="design-contents-form-td"><%= f.label :category %></td>
    	        <td class="design-contents-form-td"><%= f.select :category, Design.categories_i18n.keys.map{|k| [I18n.t("enum.design.category.#{k}"), k]} %></td>
    	      </tr>
    	      <!-- 投稿ボタン -->
    	      <tr class="design-contents-form-tr">
    			    <td class="design-contents-form-td"><%= f.submit "投稿" %></td>
    	      </tr>
    	    </tbody>
    	  </table>
  	  <% end %>
    </div>
  </section>
  <!-- 投稿表示 -->
  <section class="design-contents">
  <% @designs.each do |design| %>
    <div class="design-contents-box">
 	  <table class="design-contents-box-table">
 	  	<tbody class="design-contents-box-tbody">
 	  	  <!-- デザイン名・投稿時間 -->
 	  	  <tr class="design-contents-box-tr">
 	  	  	<td class="design-contents-box-td">デザイン名</td>
 	  	  	<td class="design-contents-box-td"><%= design.title %></td>
 	  	  	<td><%= time_ago_in_words(design.created_at) %>前</td>
 	  	  </tr>
 	  	  <!-- 投稿者名 -->
 	  	  <tr class="design-contents-box-tr">
 	  	  	<td class="design-contents-box-td">投稿者名</td>
 	  	  	<td class="design-contents-box-td"><%= design.name %></td>
 	  	  </tr>
 	  	  <!-- ID画像 tdを横方向に結合 -->
 	  	  <tr class="design-contents-box-tr">
 	  	  	<td class="design-contents-box-td" colspan="2"><%= attachment_image_tag design, :id_image, :fill, 160, 90, format: "jpeg" , fallback: "no_image.jpg", size:"160 x 90" %></td>
 	  	  <!-- サンプル画像 tdを横方向に結合 -->
 	  	  <% if design.sample_image.present? %>
 	  	    <tr class="design-contents-box-tr" colspan="2">
 	  	  	  <td class="design-contents-box-td"><%= attachment_image_tag design, :sample_image, :fill, 160, 90, format: "jpeg" %></td>
 	  	    </tr>
 	  	  <% end %>
 	  	  </tr>
 	  	  <!-- カテゴリー -->
 	  	  <tr class="design-contents-box-tr">
 	  	  	<td class="design-contents-box-td">カテゴリー</td>
 	  	  	<td class="design-contents-box-td"><%= design.category_i18n %></td>
 	  	  </tr>
 	  	  <!-- いいね -->
 	  	  <tr>
 	  	  	<td>
            <%= link_to design_likes_path(design), method: :post do %>
 	  	  	  <i class="fas fa-heart" style="color: red;"></i>
            <% end %>
            <span class="design-contents-box-td-i-span"><%= design.likes.count %></span> <!-- ※※※cssでcolor:redにする※※※ -->
          </td>
 	  	  </tr>
 	  	</tbody>
 	  </table>
    </div>
  <% end %>
  </section>
</div>
